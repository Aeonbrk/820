/*
è®¾å•é“¾è¡¨çš„è¡¨å¤´æŒ‡é’ˆä¸ºğ¿,ç»“ç‚¹ç»“æ„ç”± data å’Œ next ä¸¤ä¸ªåŸŸæ„æˆ,
å…¶ä¸­ data åŸŸä¸ºå­—ç¬¦å‹ã€‚è¯•è®¾è®¡ç®—æ³•åˆ¤æ–­è¯¥é“¾è¡¨çš„å…¨éƒ¨nä¸ªå­—ç¬¦æ˜¯å¦ä¸­å¿ƒå¯¹ç§°ã€‚
ä¾‹å¦‚xyxã€xyyxéƒ½æ˜¯ä¸­å¿ƒå¯¹ç§°
*/

#include "../../CH2/include/LinkedLisy.h"
#include "../include/stack.h"

bool isSymmetry(LinkedList* L, int n) {
  int len = n / 2;
  Node* p = L;
  Stack S;
  initStack(S);

  while (len > 0) {
    push(S, p->data);
    p = p->next;
    len--;
  }
  if (n % 2 == 1) {
    p = p->next;
  }

  while (p) {
    if (pop(S) != p->data) {
      return false;
    }
  }

  return true;
}

/*
ç®—æ³•æ€æƒ³ï¼š
å¿«æ…¢æŒ‡é’ˆå®šä½ä¸­é—´èŠ‚ç‚¹ï¼š

ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´ä½ç½®ã€‚å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ã€‚å½“å¿«æŒ‡é’ˆåˆ°è¾¾é“¾è¡¨æœ«å°¾æ—¶ï¼Œæ…¢æŒ‡é’ˆæ­£å¥½åœ¨é“¾è¡¨çš„ä¸­é—´ä½ç½®ã€‚
å¦‚æœé“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°ï¼Œæ…¢æŒ‡é’ˆä¼šæŒ‡å‘ä¸­é—´èŠ‚ç‚¹ï¼›å¦‚æœé“¾è¡¨é•¿åº¦ä¸ºå¶æ•°ï¼Œæ…¢æŒ‡é’ˆä¼šæŒ‡å‘ä¸­é—´ä¸¤ä¸ªèŠ‚ç‚¹ä¸­çš„åä¸€ä¸ªèŠ‚ç‚¹ã€‚
æ ˆå­˜å‚¨å‰åŠéƒ¨åˆ†å­—ç¬¦ï¼š

åœ¨å¿«æ…¢æŒ‡é’ˆç§»åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œå°†æ…¢æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¾æ¬¡å‹å…¥æ ˆä¸­ã€‚è¿™æ ·ï¼Œæ ˆä¸­å­˜å‚¨çš„å°±æ˜¯é“¾è¡¨å‰åŠéƒ¨åˆ†çš„å­—ç¬¦ã€‚
æ¯”è¾ƒååŠéƒ¨åˆ†å­—ç¬¦ä¸æ ˆä¸­å­—ç¬¦ï¼š

ä»ä¸­é—´ä½ç½®å¼€å§‹ï¼Œä¾æ¬¡æ¯”è¾ƒååŠéƒ¨åˆ†çš„å­—ç¬¦ä¸æ ˆä¸­å¼¹å‡ºçš„å­—ç¬¦ã€‚å¦‚æœæ‰€æœ‰å­—ç¬¦éƒ½åŒ¹é…ï¼Œåˆ™é“¾è¡¨æ˜¯ä¸­å¿ƒå¯¹ç§°çš„ï¼›å¦åˆ™ï¼Œé“¾è¡¨ä¸æ˜¯ä¸­å¿ƒå¯¹ç§°çš„ã€‚
å¤„ç†å¥‡å¶é•¿åº¦é“¾è¡¨ï¼š

å¦‚æœé“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°ï¼Œè·³è¿‡ä¸­é—´èŠ‚ç‚¹ï¼Œç›´æ¥ä»ä¸­é—´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹æ¯”è¾ƒã€‚


// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹ç»“æ„
struct ListNode {
  char data;
  ListNode* next;
  ListNode(char c) : data(c), next(nullptr) {}
};

// åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸­å¿ƒå¯¹ç§°çš„å‡½æ•°
bool isSymmetry(ListNode* L) {
  if (L == nullptr || L->next == nullptr) {
    // ç©ºé“¾è¡¨æˆ–åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨è§†ä¸ºä¸­å¿ƒå¯¹ç§°
    return true;
  }

  // å¿«æ…¢æŒ‡é’ˆåˆå§‹åŒ–
  ListNode* slow = L;
  ListNode* fast = L;
  Stack<char> s;  // ä½¿ç”¨æ ˆæ¥å­˜å‚¨å‰åŠéƒ¨åˆ†çš„å­—ç¬¦

  // ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°é“¾è¡¨çš„ä¸­é—´ä½ç½®
  while (fast != nullptr && fast->next != nullptr) {
    s.push(slow->data);       // å°†æ…¢æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦å‹å…¥æ ˆä¸­
    slow = slow->next;        // æ…¢æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥
    fast = fast->next->next;  // å¿«æŒ‡é’ˆæ¯æ¬¡ç§»åŠ¨ä¸¤æ­¥
  }

  // å¦‚æœé“¾è¡¨é•¿åº¦ä¸ºå¥‡æ•°ï¼Œè·³è¿‡ä¸­é—´èŠ‚ç‚¹
  if (fast != nullptr) {
    slow = slow->next;
  }

  // ä»ä¸­é—´ä½ç½®å¼€å§‹ï¼Œæ¯”è¾ƒååŠéƒ¨åˆ†çš„å­—ç¬¦ä¸æ ˆä¸­çš„å­—ç¬¦
  while (slow != nullptr) {
    char top = s.pop();  // å¼¹å‡ºæ ˆé¡¶å­—ç¬¦
    if (slow->data != top) {
      // å¦‚æœå­—ç¬¦ä¸åŒ¹é…ï¼Œé“¾è¡¨ä¸æ˜¯ä¸­å¿ƒå¯¹ç§°çš„
      return false;
    }
    slow = slow->next;  // ç»§ç»­æ¯”è¾ƒä¸‹ä¸€ä¸ªå­—ç¬¦
  }

  // å¦‚æœæ‰€æœ‰å­—ç¬¦éƒ½åŒ¹é…ï¼Œé“¾è¡¨æ˜¯ä¸­å¿ƒå¯¹ç§°çš„
  return true;
}
* /
